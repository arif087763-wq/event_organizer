{% extends "base.html" %}

{% block title %}Pembayaran - {{ event.title }}{% endblock %}

{% block content %}
<div class="row justify-content-center">
  <div class="col-lg-6">
    <div class="card shadow-sm">
      <div class="card-body">
        <h1 class="h4 fw-bold mb-3">Pembayaran untuk {{ event.title }}</h1>

        <p>Jumlah yang harus dibayar:
          <strong>Rp {{ registration.event.price|floatformat:0 }}</strong>
        </p>

        {% if registration.payment and registration.payment.is_confirmed %}
          <div class="alert alert-success">
            Pembayaran sudah dikonfirmasi. Anda dapat melihat tiket pada dashboard peserta.
          </div>
          <a href="{% url 'events:event_dashboard_participant' slug=event.slug %}"
             class="btn btn-success">
            Pergi ke dashboard peserta
          </a>
        {% else %}
          <form method="post" enctype="multipart/form-data" class="mt-3">
            {% csrf_token %}
            {{ form.as_p }}
            <button type="submit" class="btn btn-primary">
              Upload bukti pembayaran
            </button>
          </form>
        {% endif %}
      </div>
    </div>

    <div class="mt-3">
      <a href="{% url 'events:event_detail' slug=event.slug %}">&larr; Kembali ke detail event</a>
    </div>
  </div>
</div>
{% endblock %}
